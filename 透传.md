# 透传

## 简介

透传（fallthrough）指的是父组件传递给子组件但未被子组件显式接受（即未在 `props` 或 `defineEmits` 中定义）的属性或事件，这些属性或事件会被收集到 `$attrs` 中。在没有配置 `inheritAttrs: false` 时，里面的属性或事件会被自动附着在子组件的根元素上。

`$attrs` 可以直接在模板中使用，但不能直接在 `setup` 中使用。想要在 `setup` 中使用需要调用 API `useAttrs` 获取。

## 例子

比如这里 `App` 向 `SeButton` 传递了 2 个属性 `[nativeType, size]`，以及一个点击事件 `@click=test`，但是 `SeButton` 只定义了 `nativeType`，所以 `props` 里面就只有 `myType`，另外一个参数 `size` 和点击事件 `@click=test` 收集到了 `$attrs`，并且由于子组件这里没有配置 `{ inheritAttrs: false }`，所以这几个属性会自动绑定到根标签 `div` 上。

App.vue

```html
<template>
  <SeButton size="large" native-type="button" @click="test">test</SeButton>
</template>


<script setup lang="ts">
import SeButton from './components/Button.vue'

function test() {
  console.log('hello');
}
</script>
```

SeButton.vue

```html
<template>
  <button :type=nativeType>
    <slot></slot>
  </button>
</template>


<script setup lang="ts">
defineOptions({
  name: 'SeButton'
});

withDefaults(defineProps<{
  nativeType?: 'submit' | 'button' | 'reset'
}>(), {
  nativeType: 'button'
});
</script>
```

渲染结果

```html
<button type="button" size="large">test</button>
```

如上面所说，size 被自动绑定了，但是 click 事件是通过 addEventListener 的方式添加的，所以不会出现在这里。

## 注意

在传递 `class` 和 `style` 的时候，`vue` 会特殊处理，即合并，传递其他属性的时候，`vue` 都是直接覆盖。
