# Vue2 生命周期

Vue 实例有一个完整的生命周期，也就是从开始创建，初始化数据，编译模板，挂载DOM->渲染，更新->渲染，到卸载等的一系列过程。

1. `beforeCreate`（初始化前）：Vue 实例还未初始化，是Vue 实例生命周期的第一个钩子，在此阶段：
    1. 响应式系统尚未建立（`data`, `props` 等数据还未被代理）。
    2. 事件监听器都还没有被注册。
    3. `methods`, `computed`, `watch` 等配置项都不可访问。
    4. `this` 除了 `$options` 外，其他基本逻辑都不可用。
    5. 如果我们需要在组件数据和方法没有初始化的时候做一些事情，比如记录时间戳来实现对组件的实例化过程的性能监控，这就是一个合适的周期。
2. created（初始化后）：是 Vue 实例生命周期中响应式系统初始化完成后调用的钩子。在该阶段：
    1. `data`, `methods`, `computed`, `watch` 等选项已注入，并可以通过 `this` 访问。
    2. 事件监听器已注册。
    3. 模版尚未渲染，DOM 结构未挂载，因此 `this.$el` 虽然可能存在，但不应该访问其内容。
3. beforeMount（挂载前）：Vue 实例模版编译完成，render 函数首次执行前调用的生命周期钩子。此时：
    1. 模板已经编译为 `render` 函数。
    2. render 函数尚未执行，所以虚拟 DOM 尚未生成。
    3. `this.$el` 可能存在，但其内容未更新，不应访问。
4. mounted（挂载完成）：是 Vue 生命周期首次完成 DOM 挂载的钩子。在该阶段：
    1. `this.$el` 对应的 DOM 元素 插入页面，可以安全访问。
    2. 可对 DOM 操作，动画，图标初始化等需要真实 DOM 的逻辑。
5. beforeUpdate（更新前）：是 Vue 实例在响应式数据更新，重新渲染前被调用的钩子此时：
    1. 组件的响应式数据已经更新。
    2. DOM 结构尚未更新，页面仍呈现旧状态。
    3. 此时不建议操作 DOM，因为更新后会被覆盖。
6. updated（更新后）：是 Vue 实例在响应式数据更新后，DOM 更新完成后调用的钩子。在这个阶段：
    1. DOM 已经重新渲染，`this.$el` 可以安全访问。
    2. 适用于 DOM 读取，布局调整，滚动控制等场景；
    3. 不建议修改响应式数据，会造成更新死循环。
7. beforeDestroy（销毁前）：是 Vue 实例在被卸载和销毁前调用的生命周期钩子，在这个阶段：
    1. 组件的数据，DOM，事件仍然可以访问；
    2. 适用于释放资源，解绑监听器，清除定时器等清理工作；
    3. 是防止内存泄漏的重要钩子。
8. destroyed（销毁完成）：是 Vue 实例完成销毁过程后调用的钩子。此时：
    1. 所有的子组件，指令，响应式系统，事件监听器都已经解除。
    2. DOM 结构已经从界面中移除了。
    3. 一般用于日志记录，上报，调试等用途。
    4. 不要在此钩子中操作数据和 DOM。
9. activated（激活）：是 Vue 实例被 `keep-alive` 缓存后重新激活时触发的钩子。它不会重新创建组件或者重新挂载 DOM。这个阶段可以进行恢复数据，启用定时器，聚焦输入，刷新视图等操作，是缓存场景下的重要钩子。
10. deactivated（失活）：是 Vue 实例被 `<keep-alive>` 缓存后，从视图移除时触发的钩子函数。此时：
    1. 实例未销毁，DOM 仍在，但组件休眠。
    2. 适用于释放资源，暂停轮询，断开连接的场景。
    3. 是管理缓存组件生命周期的重要钩子。
