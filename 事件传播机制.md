# 事件传播机制

在浏览器事件模型中，冒泡（bubbling）和捕获（capturing）是两种不同的事件传播机制。理解这两者对事件处理和委托非常重要。

## 事件传播的三个阶段

当一个事件（比如 `click`）发生在某个元素上时，浏览器会按照如下顺序传播事件：

捕获阶段（Capturing phase）：事件从最外层的 `window → document → html → body → ... → 目标元素的父级` 一路向下传播。如果在这个阶段注册了事件监听，并且设置为捕获模式，就会触发。

目标阶段（Target phase）：事件到达目标元素本身，在目标元素上触发。

冒泡阶段（Bubbling phase）：事件从目标元素开始，逐级往上传播：`目标元素 → 父级 → body → html → document → window`。如果在冒泡阶段注册了事件监听，就会触发。

## 代码示例

```html
<div id="parent">
  <button id="child">点我</button>
</div>
<script>
  const parent = document.getElementById("parent");
  const child = document.getElementById("child");

  // 捕获阶段
  parent.addEventListener("click", () => {
    console.log("parent 捕获阶段");
  }, true); // 第三个参数 true 表示捕获阶段监听

  // 冒泡阶段
  parent.addEventListener("click", () => {
    console.log("parent 冒泡阶段");
  }); // 默认是 false，即冒泡阶段监听

  child.addEventListener("click", () => {
    console.log("child 被点击");
  });
</script>
```

点击按钮 `child` 的输出顺序为：

```text
parent 捕获阶段
child 被点击
parent 冒泡阶段
```
