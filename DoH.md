# DoH

DoH 全称 DNS over HTTPS，意思是“通过 HTTPS 协议进行的 DNS 查询”。

## 背景：普通 DNS 的问题

传统的 DNS 查询流程是这样的：

你的电脑向 DNS 服务器（例如 223.5.5.5）发送一个 明文 UDP/TCP 请求。

服务器返回域名对应的 IP。

问题：

* 明文传输 → 任何中间节点（运营商、Wi-Fi 提供方）都能看到你访问的域名，并且可以篡改结果（污染、劫持）。
* 容易被干扰 → 如果某个域名被屏蔽，运营商可以直接返回错误 IP（比如 127.0.0.1）或根本不回应。

## DoH 的工作方式

DoH 把 DNS 查询封装在 HTTPS 请求里：

```text
客户端  ——(HTTPS加密)——>  DoH 服务器  ——> 返回解析结果
```

你访问的域名（例如 static.leetcode.cn）会作为 HTTPS POST/GET 的内容发给 DoH 服务器。

因为是 HTTPS：

* 数据加密，别人看不到你要解析的具体域名（只能看到你访问了哪台 DoH 服务器，比如 dns.cloudflare.com）。
* 内容完整性有保障，中间节点不能随便改结果。
* 一般走 TCP 443 端口，更不容易被简单拦截（但可以被针对性的封锁）。
