# cookie 和 session

## cookie

Cookie 定义：Cookie 是服务器发送到浏览器的一小段数据，保存在浏览器本地（一般是文本文件或浏览器内部存储）。

工作原理：

* 客户端第一次访问服务器时，服务器可以在响应头中写入 `Set-Cookie`。
* 浏览器收到后会把 Cookie 保存下来。
* 之后每次访问同一域名时，浏览器会自动在请求头中携带这个 Cookie (Cookie: key=value)，发送给服务器。

特点：

* 保存在 客户端（用户浏览器）。
* 可以设置过期时间（临时 cookie、持久 cookie）。
* 大小有限制（通常单个 cookie 4KB 左右，一个域名最多存 20 个左右）。
* 明文传输（除非用 HTTPS），所以安全性相对较差。

常见用途：

* 保存用户登录状态（比如记住账号）。
* 存储用户偏好设置（语言、主题）。
* 统计用户行为（广告跟踪）。

## session

Session 定义：Session 是服务器端保存的用户会话信息，通常以数据结构的形式存储在内存、数据库或缓存中。

工作原理：

* 用户第一次访问服务器时，服务器创建一个唯一的 Session ID，并在服务端保存对应的数据。
* 服务器通过 Set-Cookie 把 Session ID 发给客户端，存储在 Cookie 中（比如 JSESSIONID=xxxx）。
* 用户再次请求时，浏览器会自动携带 Session ID，服务器通过它找到对应的 Session 数据。

特点：

* 保存在 服务器端。
* 依赖 Cookie（或 URL 重写、请求参数）来传递 Session ID。
* 安全性更高（数据不在客户端，客户端只有一个 Session ID）。
* 占用服务器资源（大量并发用户会增加内存/数据库压力）。
